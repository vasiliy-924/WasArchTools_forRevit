# План разработки скрипта Automation_Apartments

## 1. Подготовка структуры
1.1. Создание файловой структуры:
    □ WasArchTools.extension/WasArchTools.tab/Tags_Data.panel/
    □ Automation_Apartments.pushbutton/
        - script.py
        - config.py (для коэффициентов по умолчанию)
        - icon.png
        - README.md

1.2. Создание shared parameters:
    □ "Площадь_учт" (Area_Accounted) - для хранения площади с коэффициентами
    □ "Тип_помещения" (Room_Type) - для идентификации балконов/лоджий
    □ "Коэффициент" (Area_Coefficient) - для хранения примененного коэффициента

## 2. Разработка базовой функциональности
2.1. Создание основных функций:
    □ get_all_rooms() - получение всех помещений
    □ filter_rooms_by_level() - фильтрация по этажу
    □ calculate_area() - расчет площади с коэффициентом
    □ update_room_parameters() - обновление параметров помещения
    □ export_to_csv() - экспорт результатов

2.2. Создание вспомогательных функций:
    □ is_balcony() - проверка, является ли помещение балконом/лоджией
    □ get_coefficient() - получение коэффициента для типа помещения
    □ format_area() - форматирование площади для вывода

## 3. Разработка пользовательского интерфейса
3.1. Создание главного окна:
    □ Выбор этажей (множественный выбор)
    □ Ввод коэффициентов:
        - Для балконов (по умолчанию 0.3)
        - Для лоджий (по умолчанию 0.5)
    □ Кнопки:
        - Рассчитать
        - Экспорт в CSV
        - Отмена

3.2. Создание вспомогательных диалогов:
    □ Прогресс-бар для длительных операций
    □ Диалог подтверждения перезаписи параметров
    □ Окно с результатами расчета

## 4. Реализация основного скрипта
4.1. Базовая структура script.py:
    □ Импорты и настройка логирования
    □ Проверка наличия shared parameters
    □ Создание UI
    □ Основной обработчик

4.2. Обработка данных:
    □ Получение выбранных этажей
    □ Фильтрация помещений
    □ Расчет площадей
    □ Обновление параметров
    □ Подготовка отчета

## 5. Тестирование
5.1. Модульное тестирование:
    □ Тест расчета площадей
    □ Тест фильтрации помещений
    □ Тест экспорта данных

5.2. Интеграционное тестирование:
    □ Тест на реальном проекте
    □ Проверка граничных случаев
    □ Проверка производительности

## 6. Документация
6.1. Комментарии в коде:
    □ Docstrings для всех функций
    □ Описание параметров и возвращаемых значений
    □ Примеры использования

6.2. README.md:
    □ Описание назначения скрипта
    □ Инструкция по использованию
    □ Описание параметров
    □ Примеры результатов

## Порядок разработки:
1. Создать структуру и shared parameters
2. Реализовать базовые функции работы с данными
3. Создать и протестировать UI
4. Объединить всё в основном скрипте
5. Провести тестирование
6. Написать документацию

## Критерии готовности:
✓ Скрипт корректно считает площади
✓ UI понятен и удобен
✓ Все параметры сохраняются
✓ Экспорт работает корректно
✓ Документация полная и понятная 